<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#111111" />
  <title>是々日々</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="icon" sizes="192x192" href="icon-192.png" />
  <link rel="icon" sizes="512x512" href="icon-512.png" />
  <link rel="apple-touch-icon" href="icon-512.png" />

  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <noscript>このアプリを利用するにはJavaScriptを有効にしてください。</noscript>

  <!-- ヘッダー -->
  <header class="top-bar">
    <div class="top-title">是々日々</div>
    <div class="top-today" id="todayLabel"></div>
  </header>

  <!-- 画面本体 -->
  <main>

    <!-- 日記（月カレンダー + 日別） -->
    <section id="screenDiary" class="screen screen-active">
      <div class="month-header">
        <button id="dPrevM" class="nav-btn">‹</button>
        <div id="dMonthLabel" class="month-label"></div>
        <button id="dNextM" class="nav-btn">›</button>
      </div>

      <!-- 曜日ヘッダー -->
      <div class="weekday-row">
        <div class="wd sun">日</div>
        <div class="wd">月</div>
        <div class="wd">火</div>
        <div class="wd">水</div>
        <div class="wd">木</div>
        <div class="wd">金</div>
        <div class="wd sat">土</div>
      </div>

      <!-- カレンダー（隙間ゼロでびっしり） -->
      <div id="dCalGrid" class="calendar-grid"></div>

      <!-- 選択日の概要 -->
      <div class="day-summary">
        <div>
          <span id="dSelDateLabel" class="badge"></span>
          <span id="dSelJP"></span>
        </div>
        <button id="dNewBtn" class="primary-btn">記録を書く</button>
      </div>

      <!-- 選択日の一覧 -->
      <div id="dList" class="card-list"></div>

      <!-- 日記編集モーダル -->
      <dialog id="dlgDiary" class="modal">
        <form method="dialog" class="modal-body">
          <h3 id="dlgDiaryTitle">日記</h3>

          <label class="field-label">
            日付
            <input id="diaryDate" type="date" required />
          </label>

          <div class="grid-3">
            <label class="field-label">
              起床
              <input id="diaryWake" type="time" />
            </label>
            <label class="field-label">
              朝食
              <input id="diaryBreakfast" type="text" placeholder="例）トースト" />
            </label>
            <label class="field-label">
              昼食/夕食
              <input id="diaryLunchDinner" type="text" placeholder="例）パスタ / カレー" />
            </label>
          </div>

          <label class="field-label">
            タイトル
            <input id="diaryTitle" type="text" />
          </label>

          <label class="field-label">
            本文
            <textarea id="diaryBody" rows="6"></textarea>
          </label>

          <div class="modal-actions">
            <button type="button" id="diaryDelete" class="danger-btn">削除</button>
            <div class="flex-spacer"></div>
            <button value="cancel" class="sub-btn">キャンセル</button>
            <button id="diarySave" value="default" class="primary-btn">保存</button>
          </div>

          <input type="hidden" id="diaryId" />
        </form>
      </dialog>
    </section>

    <!-- 予定 -->
    <section id="screenSched" class="screen">
      <div class="month-header">
        <button id="sPrevM" class="nav-btn">‹</button>
        <div id="sMonthLabel" class="month-label"></div>
        <button id="sNextM" class="nav-btn">›</button>
      </div>

      <div class="weekday-row">
        <div class="wd sun">日</div>
        <div class="wd">月</div>
        <div class="wd">火</div>
        <div class="wd">水</div>
        <div class="wd">木</div>
        <div class="wd">金</div>
        <div class="wd sat">土</div>
      </div>

      <div id="sCalGrid" class="calendar-grid"></div>

      <div class="day-summary">
        <div>
          <span id="sSelDateLabel" class="badge"></span>
          <span id="sSelJP"></span>
        </div>
        <button id="sNewBtn" class="primary-btn">予定を追加</button>
      </div>

      <div id="sList" class="card-list"></div>

      <!-- 予定編集モーダル -->
      <dialog id="dlgSched" class="modal">
        <form method="dialog" class="modal-body">
          <h3>予定</h3>

          <label class="field-label">
            日付
            <input id="schDate" type="date" required />
          </label>

          <div class="grid-2">
            <label class="field-label">
              開始
              <input id="schStart" type="time" />
            </label>
            <label class="field-label">
              終了
              <input id="schEnd" type="time" />
            </label>
          </div>

          <label class="field-label">
            タイトル
            <input id="schTitle" type="text" required />
          </label>

          <label class="field-label">
            メモ
            <textarea id="schNote" rows="4"></textarea>
          </label>

          <div class="field-inline">
            <input id="schDone" type="checkbox" />
            <label for="schDone">完了</label>
          </div>

          <div class="modal-actions">
            <button type="button" id="schDelete" class="danger-btn">削除</button>
            <div class="flex-spacer"></div>
            <button value="cancel" class="sub-btn">キャンセル</button>
            <button id="schSave" value="default" class="primary-btn">保存</button>
          </div>

          <input type="hidden" id="schId" />
        </form>
      </dialog>
    </section>

    <!-- 検索 -->
    <section id="screenSearch" class="screen">
      <div class="search-panel">
        <input id="searchInput" type="text" placeholder="キーワード（タイトル・本文・予定など）" />
      </div>

      <div class="search-grid">
        <div>
          <h3 class="sub-heading">日記</h3>
          <div id="searchDiary" class="card-list"></div>
        </div>
        <div>
          <h3 class="sub-heading">予定</h3>
          <div id="searchSched" class="card-list"></div>
        </div>
      </div>
    </section>

    <!-- スケジュール調整（簡略版） -->
    <section id="screenCoord" class="screen">
      <div class="coord-header">
        <div id="coordWeekLabel" class="month-label small"></div>
        <button id="coordPrev" class="nav-btn">‹</button>
        <button id="coordNext" class="nav-btn">›</button>
      </div>
      <div id="coordBands" class="bands-list">
        <!-- JSで帯を描画 -->
      </div>
    </section>

  </main>

  <!-- 下タブ -->
  <nav class="tab-bar">
    <button class="tab-btn tab-active" data-target="screenDiary">
      <span>日記</span>
    </button>
    <button class="tab-btn" data-target="screenSched">
      <span>予定</span>
    </button>
    <button class="tab-btn" data-target="screenSearch">
      <span>検索</span>
    </button>
    <button class="tab-btn" data-target="screenCoord">
      <span>調整</span>
    </button>
  </nav>

  <script src="app.js"></script>
</body>
</html>
