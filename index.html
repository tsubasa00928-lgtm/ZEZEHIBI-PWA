<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>是々日々｜日記 / 予定 / 調整</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="icon-192.png" sizes="192x192">
  <link rel="apple-touch-icon" href="icon-512.png">
  <meta name="theme-color" content="#02040a">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app-root">
    <!-- 上部バー -->
    <header class="top-bar">
      <div>
        <div class="top-title">是々日々</div>
        <div class="top-today" id="todayLabel"></div>
      </div>
    </header>

    <!-- メインエリア -->
    <main class="main-area">
      <!-- カレンダー画面（ホーム） -->
      <section class="screen screen-active" id="screen-calendar">
        <!-- 月ナビ -->
        <div class="month-header">
          <button class="nav-btn" id="prevMonthBtn" aria-label="前の月">‹</button>
          <div class="month-label" id="monthLabel">2025年11月</div>
          <button class="nav-btn" id="nextMonthBtn" aria-label="次の月">›</button>
        </div>

        <!-- 曜日 -->
        <div class="weekday-row">
          <div class="wd sun">日</div>
          <div class="wd">月</div>
          <div class="wd">火</div>
          <div class="wd">水</div>
          <div class="wd">木</div>
          <div class="wd">金</div>
          <div class="wd sat">土</div>
        </div>

        <!-- カレンダー本体：びっしり 7×6 -->
        <div class="calendar-grid" id="calendarGrid">
          <!-- JS で .day-cell を 7×6 生成 -->
        </div>
      </section>

      <!-- 日記画面（ダブルクリックで遷移してくる想定） -->
      <section class="screen" id="screen-diary">
        <header class="section-header">
          <h2 id="diaryDateTitle">日記</h2>
          <button class="sub-btn" id="backToCalendarBtn">戻る</button>
        </header>

        <div class="card-list">
          <div class="card">
            <div class="card-title">今日の記録</div>
            <div class="field-label">
              <span>タイトル</span>
              <input id="diaryTitleInput" type="text" placeholder="タイトル">
            </div>
            <div class="field-label">
              <span>本文</span>
              <textarea id="diaryBodyInput" rows="6" placeholder="一日の振り返り"></textarea>
            </div>

            <div class="grid-2">
              <div class="field-label">
                <span>就寝時刻</span>
                <input id="sleepInput" type="time">
              </div>
              <div class="field-label">
                <span>起床時刻</span>
                <input id="wakeInput" type="time">
              </div>
            </div>

            <div class="field-label">
              <span>食事メモ</span>
              <input id="mealsInput" type="text" placeholder="朝 / 昼 / 夜 など">
            </div>

            <div class="modal-actions">
              <button class="danger-btn" id="deleteDiaryBtn">削除</button>
              <div class="flex-spacer"></div>
              <button class="primary-btn" id="saveDiaryBtn">保存</button>
            </div>
          </div>
        </div>
      </section>

      <!-- 予定タブ（シンプルなプレースホルダ） -->
      <section class="screen" id="screen-schedule">
        <header class="section-header">
          <h2>予定</h2>
        </header>
        <div class="card-list">
          <div class="card">
            <div class="card-title">ここに予定機能を追加予定</div>
            <div class="card-sub">まずはカレンダー & 日記の同期を優先しています。</div>
          </div>
        </div>
      </section>

      <!-- 検索タブ -->
      <section class="screen" id="screen-search">
        <header class="section-header">
          <h2>検索</h2>
        </header>
        <div class="search-panel">
          <input id="searchInput" class="search-input" type="search" placeholder="キーワードで日記を検索">
        </div>
        <div class="search-grid" id="searchResults"></div>
      </section>

      <!-- 調整タブ -->
      <section class="screen" id="screen-adjust">
        <header class="section-header">
          <h2>スケジュール調整</h2>
        </header>
        <div class="bands-list">
          <div class="band-row">
            <span>この機能は今後アップデート予定です。</span>
          </div>
        </div>
      </section>
    </main>

    <!-- 下タブバー（ホームバーと被らないように浮かせてある） -->
    <nav class="tab-bar">
      <button class="tab-btn tab-active" data-screen="calendar">カレンダー</button>
      <button class="tab-btn" data-screen="diary">日記</button>
      <button class="tab-btn" data-screen="search">検索</button>
      <button class="tab-btn" data-screen="adjust">調整</button>
    </nav>
  </div>

  <!-- メインロジック（Firebase + カレンダー + 日記） -->
  <script type="module" src="app.js"></script>
</body>
</html>
