/* =========================
   ZEZEHIBI styles.css (full)
   ========================= */

/* -------- CSS Variables -------- */
:root{
  /* Colors */
  --bg-main:#02040a;
  --bg-grad-a:#020817;
  --bg-card:#0b1020;
  --bg-card-soft:#111827;
  --bg-input:#030712;
  --accent:#38bdf8;
  --accent-soft:rgba(56,189,248,.16);
  --text:#e5e7eb;
  --text-sub:#9ca3af;
  --danger:#f97373;

  /* Radius / Shadow */
  --r-xl:22px; --r-md:14px; --r-sm:9px;
  --shadow-soft:0 14px 38px rgba(0,0,0,.7);
  --shadow-mid:0 10px 30px rgba(0,0,0,.75);
  --shadow-card:0 8px 22px rgba(0,0,0,.7);

  /* Layout metrics */
  --topbar-h:48px;
  --tab-h:50px;
  --safe-bottom:env(safe-area-inset-bottom,0px);
  --tab-gap:10px;
  --tab-offset:calc(var(--safe-bottom) + var(--tab-gap));
  --tab-total:calc(var(--tab-h) + var(--tab-offset));

  /* Font */
  --font-sans:system-ui,-apple-system,BlinkMacSystemFont,"SF Pro Text","Noto Sans JP",sans-serif;
  --fs-10:10px; --fs-11:11px; --fs-12:12px; --fs-13:13px; --fs-14:14px; --fs-16:16px;
}

/* -------- Reset -------- */
*,*::before,*::after{ box-sizing:border-box; }
html,body{ margin:0; padding:0; height:100%; }
html{ background:#000; }
body{
  min-height:100vh;
  background: radial-gradient(circle at top, var(--bg-grad-a) 0, var(--bg-main) 40%, #010308 100%);
  color:var(--text);
  font-family:var(--font-sans);
  -webkit-text-size-adjust:100%;
  overflow-x:hidden;               /* 横スクロール防止 */
  touch-action:manipulation;       /* ダブルタップズーム抑制 */
  overscroll-behavior-y:contain;   /* 引っ張り挙動を穏やかに */
}

/* スクロールバー非表示（モバイル） */
::-webkit-scrollbar{ width:0; height:0; }

/* -------- App Frame -------- */
.app-root{ min-height:100vh; display:flex; flex-direction:column; }

/* Top Bar */
.top-bar{
  height:var(--topbar-h);
  display:flex; align-items:center; justify-content:space-between;
  padding:10px 14px 2px;
}
.top-title{ font-size:18px; font-weight:600; letter-spacing:.16em; }
.top-today{ font-size:11px; color:var(--text-sub); }

/* Main Scroll Area（下タブ分の余白は各画面の最後に確保）*/
.main-area{ flex:1; overflow-y:auto; padding:0 6px; }

/* Screen switcher */
.screen{ display:none; }
.screen-active,.screen.active{ display:block; }

/* -------- Month Header -------- */
.month-header{
  margin-top:4px; padding:6px 10px; display:flex; align-items:center; gap:8px;
  border-radius:var(--r-xl);
  background:linear-gradient(to right, rgba(11,15,25,.98), rgba(8,47,73,.92));
  box-shadow:var(--shadow-soft);
}
.nav-btn{
  width:26px; height:26px; border:none; border-radius:999px;
  background:rgba(9,9,15,.98); color:var(--accent); display:flex; align-items:center; justify-content:center;
  font-size:16px;
}
.month-label{ flex:1; text-align:center; font-weight:600; font-size:16px; }
.month-label.small{ font-size:13px; }

/* -------- Weekday Row -------- */
.weekday-row{
  display:grid; grid-template-columns:repeat(7,1fr);
  padding:4px 6px 0; font-size:10px; color:var(--text-sub);
}
.wd{ text-align:center; }
.sun{ color:#f97373; }
.sat{ color:#60a5fa; }

/* -------- Calendar (dense 7x6) -------- */
.calendar-grid{
  margin:2px 4px 0;
  display:grid; grid-template-columns:repeat(7,1fr); grid-template-rows:repeat(6, minmax(40px,1fr));
  gap:0; border-radius:16px; overflow:hidden; background:#02040a; box-shadow:var(--shadow-mid);
}

/* Day Cell (keeps table look by borders) */
.day-cell{
  position:relative; display:flex; flex-direction:column; gap:2px;
  padding:3px 3px 2px;
  border:0.6px solid rgba(148,163,253,.12);    /* 格子線 */
  background: radial-gradient(circle at top, #0b1220 0, #02040a 55%);
  -webkit-user-select:none; user-select:none;
}
.day-cell.out{ opacity:.26; }
.day-num{
  font-size:10px; font-weight:600; text-align:right; padding-right:3px;
}
.day-cell.sun .day-num{ color:#f97373; }
.day-cell.sat .day-num{ color:#60a5fa; }
.day-cell.today{
  border-color:#38bdf8; box-shadow: inset 0 0 0 1px rgba(56,189,248,.6);
}
.day-cell.selected{
  background:linear-gradient(to bottom, #111827, #02040a);
  box-shadow: inset 0 0 0 1px rgba(56,189,248,.9);
}

/* Titles inside the day (max 3 lines) */
.day-tags{
  font-size:7.5px; line-height:1.2; color:#93c5fd;
  overflow:hidden; display:-webkit-box; -webkit-box-orient:vertical; -webkit-line-clamp:3;
}

/* Selected day summary bar */
.day-summary{
  margin:8px 6px 4px; padding:6px 8px; display:flex; align-items:center; gap:10px;
  border-radius:12px; background:rgba(6,10,19,.98); box-shadow:0 6px 18px rgba(0,0,0,.7);
  font-size:10px;
}
.badge{ padding:2px 8px; border-radius:999px; background:#0f172a; color:var(--accent); font-size:10px; }

/* -------- Buttons -------- */
.primary-btn,.sub-btn,.danger-btn{
  border:none; border-radius:999px; padding:6px 12px; font-size:12px; cursor:pointer;
}
.primary-btn{ background:var(--accent); color:#06131f; }
.sub-btn{ background:#0f172a; color:var(--text-sub); }
.danger-btn{ background:var(--danger); color:#111827; }

/* Small variants for cards/toolbars */
.btn-sm{ padding:5px 10px; font-size:10px; }

/* -------- Cards / Lists -------- */
.card-list{ margin:6px 6px 12px; display:flex; flex-direction:column; gap:8px; }
.card{
  padding:8px 10px; border-radius:var(--r-md); background:var(--bg-card);
  box-shadow:var(--shadow-card); font-size:12px;
}
.card-title{ font-weight:700; margin-bottom:2px; }
.card-sub{ font-size:11px; color:var(--text-sub); }

/* -------- Editor (Diary) -------- */
.entry-header{ display:flex; align-items:center; gap:8px; padding:8px 8px 0; }
.entry-date{ margin-left:auto; display:flex; align-items:center; gap:8px; }
.editor{ padding:8px 8px 14px; }
.field-label{ display:flex; flex-direction:column; gap:4px; font-size:12px; color:var(--text-sub); }
.field-label input,.field-label textarea{
  width:100%; border-radius:12px; border:1px solid rgba(148,163,253,.28);
  background:var(--bg-input); color:var(--text); padding:8px 10px; font-size:13px;
}
.field-label textarea{ resize:vertical; min-height:160px; }
.grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:8px; }
.grid-3{ display:grid; grid-template-columns:repeat(3,1fr); gap:8px; }
.editor-actions{ display:flex; align-items:center; gap:8px; margin-top:8px; }
.flex-spacer{ flex:1; }

/* Meals row (起床・食事) */
.meal-row{ display:grid; grid-template-columns:1fr 1fr 1fr; gap:8px; }

/* -------- Search -------- */
.section-header{ display:flex; align-items:center; justify-content:space-between; padding:8px 8px 2px; }
.section-header h2{ margin:0; font-size:14px; }
.search-panel{ padding:0 8px 6px; }
.search-input{
  width:100%; padding:10px 14px; border-radius:999px;
  border:1px solid rgba(148,163,253,.28); background:#02040a; color:var(--text); font-size:13px;
}
.search-grid{ display:grid; grid-template-columns:1fr; gap:10px; padding:4px 6px 12px; }
.sub-heading{ margin:0 0 6px; font-size:13px; color:var(--text-sub); }

/* -------- Schedule (既存予定画面の簡易カード) -------- */
.sched-list .card{ font-size:12px; }
.sched-time{ color:var(--text-sub); font-size:11px; }

/* -------- Coordination (帯カレンダー要素のミニ一覧) -------- */
.coord-header{ margin:8px 6px 4px; display:flex; align-items:center; gap:6px; }
.bands-list{ margin:4px 6px 12px; display:flex; flex-direction:column; gap:6px; font-size:12px; }
.band-row{
  padding:6px 10px; border-radius:12px; background:var(--bg-card-soft);
  display:flex; justify-content:space-between; align-items:center;
}

/* -------- Modal (native <dialog>) -------- */
.modal{ border:none; padding:0; border-radius:22px;
  background: radial-gradient(circle at top, var(--bg-grad-a), var(--bg-main));
  color:var(--text); box-shadow:0 24px 70px rgba(0,0,0,.95);
}
.modal::backdrop{ background:rgba(0,0,0,.68); }
.modal-body{ padding:14px; display:flex; flex-direction:column; gap:8px; font-size:12px; }
.modal-actions{ display:flex; align-items:center; gap:8px; margin:6px 0 2px; }

/* -------- Bottom Tab Bar (浮かせ＋ホームバー回避) -------- */
.tab-bar{
  position:fixed; left:10px; right:10px;
  bottom:calc(var(--safe-bottom) + 8px);
  height:var(--tab-h);
  padding:6px; display:grid; grid-template-columns:repeat(4,1fr); gap:6px;
  border-radius:18px; background:rgba(3,6,14,.98);
  box-shadow:0 -2px 18px rgba(0,0,0,.85);
  backdrop-filter:blur(18px);
  z-index:100;
}
.tab-btn{
  border:none; padding:8px 6px; border-radius:14px; font-size:13px;
  color:var(--text-sub); background:transparent; display:flex; align-items:center; justify-content:center;
}
.tab-btn.tab-active,.tab-btn.active{ background:var(--accent-soft); color:var(--accent); font-weight:700; }

/* -------- Helpers -------- */
.small{ font-size:11px; color:var(--text-sub); }
.hint{ margin:6px 8px 8px; color:var(--text-sub); }
.hide{ display:none !important; }

/* -------- Phone tweaks -------- */
@media (max-width:380px){
  .month-label{ font-size:15px; }
  .day-num{ font-size:10px; }
  .day-tags{ font-size:7.2px; -webkit-line-clamp:3; }
  .grid-3{ grid-template-columns:1fr 1fr; }
  .tab-bar{ left:8px; right:8px; }
}
